<html>
  
  <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Homepage of Dr. Zoltán Porkoláb</title>
  <meta name="description" content="Dr. Zoltán Porkoláb is an Associate Professor of the Department of Programming Languages and Compilers at the Faculty of Informatics, Eötvös Loránd University (ELTE), Budapest, Hungary.  At the same time, he holds Principal C++ Developer position at Ericsson Hungary Ltd.">

  <link rel="stylesheet" href="css/default.css">
  <link rel="stylesheet" href="css/syntax.css">
  <link rel="canonical" href="http://gsd.web.elte.hu/lectures/imper/imper-lecture-11/">
  <link rel="alternate" type="application/rss+xml" title="Homepage of Dr. Zoltán Porkoláb" href="http://gsd.web.elte.hu/feed.xml" />
</head>


  <body>
    <div id='wrap'>

      <!--<div id='header'>
  <div class='tagline'>Homepage of Dr. Zoltán Porkoláb</div>
</div>
-->

      <div id='pages'>
  <ol class='toc'>
    <li>Homepage of Dr. Zoltán Porkoláb
      <ol class="toc"> 
        <li><a href='/'>Home</a></li>
        <li><a href='/archive'>Archive</a></li>
      </ol>
    <li>Teaching
      <ol class="toc">
        <li><a href='/timetable'>Timetable</a></li>
        <li><a href='/imper'>Imperative programming (BSc)</a></li>
        <li><a href='/multi'>Multiparadigm programming (MSc)</a></li>
        <li><a href='/c-phys'>C programming (BSc for physicists)</a></li>
        <li><a href='/tools'>Project tools (BSc)</a></li>
        <li><a href='/bolyai'>Bolyai College</a></li>
        <li><a href='/cpp-en'>C++ (for foreign studenst)</a></li>
        <li><a href='/softtech'>Software technology lab</a></li>
        <li><a href='/thesis'>BSc and MSc thesis</a></li>
      </ol>
    </li>
    <li>Research
      <ol class="toc">
        <li><a href='http://plc.inf.elte.hu/templight'>Templight</a></li>
        <li><a href='https://github.com/Ericsson/codechecker'>CodeChecker</a></li>
        <li><a href='https://github.com/Ericsson/codecompass'>CodeCompass</a></li>
        <li><a href='/projects'>Projects</a></li>
        <li><a href='http://aszt.inf.elte.hu/~gsd/porkolab_publications_en_2011.pdf'>Publications (up to 2011)</a></li>
        <li><a href='http://www.doktori.hu/index.php?menuid=192&sz_ID=2806&lang=EN'>PhD students</a></li>
      </ol>
    </li>
    <li>Affiliations
      <ol class="toc">
        <li><a href='http://plcportal.inf.elte.hu/'>Dept. of Programming Languages and Compilers</a></li>
        <li><a href='http://www.ericsson.com/hu'>Ericsson Hungary Ltd</a></li>
      </ol>
    </li>
  </ol>
</div>


      <div id='content'>
        <h1 id=''></h1>
        <div class="post">

  <!--header class="post-header">
    <h1 class="post-title"></h1>
    <p class="post-meta"></p>
  </header-->

  <article class="post-content">
    <div class="post">

  <!--header class="post-header">
    <h1 class="post-title"></h1>
  </header-->

  <article class="post-content">
    <h1 id="imperatv-programozs-11">Imperatív programozás 11.</h1>

<h1 id="unix-filterek-implementlsa">Unix filterek implementálása</h1>

<p>A UNIX <strong>szűrők</strong> (filters) olyan programok, amelyek valami elemi 
tevékenységet végeznek el. Ilyen filter a <em>cat</em>, <em>grep</em>, <em>diff</em> és
még sok más program. Ezek a programok tipikusan a <em>standard inputról</em>
olvasnak EOF-ig és az eredményt a <em>standard outputra</em> írják. Amennyiben 
a programok egy vagy több fájlnév paramétert kapnak, akkor a standard 
input heyett ezekről a fájlokról olvasnak. Az így megírt programokat
kényelmesen és sokoldalúan lehet <em>pipe</em>-okba szervezni.</p>

<h2 id="grep">grep</h2>

<p>Az alábbi a <strong>grep</strong> program egy leegyszerűsített megvalósítása. A program
<em>reguláris kifejezések</em>-et keres az input állományokban.</p>

<p>Alapvetően így használható a program:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>gr pattern file1 file2 file3</code></pre></div>

<p>Ebben az esetben a <strong>pattern</strong> mintát keressük a <em>file1</em>, <em>file2</em>, és <em>file3</em>
állományokban és kiírjuk azokat a sorokat, ahol találat van.</p>

<p>Megvalósítjuk a <strong>-i</strong> és <strong>-v</strong> kapcsolókat, melyek az alapvető működést 
befolyásolja.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>gr -iv pattern file1 file2 file3</code></pre></div>

<ul>
  <li>A <strong>-v</strong> kapcsoló hatására azok a sorok íródnak ki, melyekben <em>nem</em> volt találat.</li>
  <li>A <strong>-i</strong> kapcsoló a kis-nagybetűk közötti különbséget nem veszi figyelembe.</li>
  <li>A <strong>-w</strong> kapcsoló csak olyankor jelez találatot, ha az egy <em>teljes szó</em>, azaz üreshelyekkel van körbevéve.</li>
</ul>

<p>A <a href="http://www.computerhope.com/unix/ugrep.htm">grep</a>. pontos leírása a linken
található.</p>

<h3 id="a-teljes-program">A teljes program</h3>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="lineno">  1</span> <span class="cm">/*</span>
<span class="lineno">  2</span> <span class="cm"> * gr.c -- a simple grep-like program</span>
<span class="lineno">  3</span> <span class="cm"> * usage: gr [-ivw] pattern [files...]</span>
<span class="lineno">  4</span> <span class="cm"> *</span>
<span class="lineno">  5</span> <span class="cm"> */</span>
<span class="lineno">  6</span> 
<span class="lineno">  7</span> <span class="cp">#include &lt;stdio.h&gt;</span>
<span class="lineno">  8</span> <span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="lineno">  9</span> <span class="cp">#include &lt;string.h&gt;</span>
<span class="lineno"> 10</span> <span class="cp">#include &lt;ctype.h&gt;</span>
<span class="lineno"> 11</span> 
<span class="lineno"> 12</span> <span class="cp">#define BUFSIZE 1024</span>
<span class="lineno"> 13</span> 
<span class="lineno"> 14</span> <span class="k">struct</span> <span class="n">param_s</span>
<span class="lineno"> 15</span> <span class="p">{</span>
<span class="lineno"> 16</span>   <span class="kt">int</span>  <span class="n">iflag</span><span class="p">;</span>     <span class="cm">/* case insensitive on */</span>
<span class="lineno"> 17</span>   <span class="kt">int</span>  <span class="n">vflag</span><span class="p">;</span>     <span class="cm">/* negation on         */</span>
<span class="lineno"> 18</span>   <span class="kt">int</span>  <span class="n">wflag</span><span class="p">;</span>     <span class="cm">/* word regex on       */</span>
<span class="lineno"> 19</span>   <span class="kt">char</span> <span class="o">*</span><span class="n">pattern</span><span class="p">;</span>  <span class="cm">/* pattern to search   */</span>
<span class="lineno"> 20</span>   <span class="kt">char</span> <span class="o">*</span><span class="n">upattern</span><span class="p">;</span> <span class="cm">/* upper case pattern  */</span>
<span class="lineno"> 21</span> <span class="p">};</span>
<span class="lineno"> 22</span> 
<span class="lineno"> 23</span> <span class="kt">void</span> <span class="nf">usage</span><span class="p">(</span> <span class="kt">char</span> <span class="o">*</span><span class="n">prname</span><span class="p">)</span>
<span class="lineno"> 24</span> <span class="p">{</span>
<span class="lineno"> 25</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Usage: %s [-ivw] pattern [files...]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">prname</span><span class="p">);</span> 
<span class="lineno"> 26</span>   <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="lineno"> 27</span> <span class="p">}</span>
<span class="lineno"> 28</span> 
<span class="lineno"> 29</span> <span class="kt">int</span> <span class="nf">do_params</span><span class="p">(</span> <span class="k">struct</span> <span class="n">param_s</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="lineno"> 30</span> <span class="p">{</span>
<span class="lineno"> 31</span>   <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno"> 32</span> 
<span class="lineno"> 33</span>   <span class="n">p</span><span class="o">-&gt;</span><span class="n">iflag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 34</span>   <span class="n">p</span><span class="o">-&gt;</span><span class="n">vflag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 35</span>   <span class="n">p</span><span class="o">-&gt;</span><span class="n">wflag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 36</span> 
<span class="lineno"> 37</span>   <span class="cm">/* letter flags first */</span>
<span class="lineno"> 38</span>   <span class="k">while</span> <span class="p">(</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span>  <span class="o">&amp;&amp;</span>  <span class="sc">&#39;-&#39;</span> <span class="o">==</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
<span class="lineno"> 39</span>   <span class="p">{</span>
<span class="lineno"> 40</span>     <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno"> 41</span>     <span class="k">while</span> <span class="p">(</span> <span class="sc">&#39;\0&#39;</span> <span class="o">!=</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="p">)</span>
<span class="lineno"> 42</span>     <span class="p">{</span>
<span class="lineno"> 43</span>       <span class="k">switch</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>
<span class="lineno"> 44</span>       <span class="p">{</span>
<span class="lineno"> 45</span>       <span class="k">case</span> <span class="sc">&#39;i&#39;</span><span class="o">:</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">iflag</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
<span class="lineno"> 46</span>       <span class="k">case</span> <span class="sc">&#39;v&#39;</span><span class="o">:</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">vflag</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
<span class="lineno"> 47</span>       <span class="k">case</span> <span class="sc">&#39;w&#39;</span><span class="o">:</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">wflag</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
<span class="lineno"> 48</span>       <span class="k">default</span> <span class="o">:</span> <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Invalid flag: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
<span class="lineno"> 49</span>                 <span class="n">usage</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="cm">/* invalid flag: exit() */</span>
<span class="lineno"> 50</span>       <span class="p">}</span>
<span class="lineno"> 51</span>       <span class="o">++</span><span class="n">j</span><span class="p">;</span>
<span class="lineno"> 52</span>     <span class="p">}</span>
<span class="lineno"> 53</span>     <span class="o">++</span><span class="n">i</span><span class="p">;</span>
<span class="lineno"> 54</span>   <span class="p">}</span>
<span class="lineno"> 55</span>   <span class="cm">/* end of flags, pattern should come here */</span>
<span class="lineno"> 56</span>   <span class="k">if</span> <span class="p">(</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">argc</span> <span class="p">)</span>
<span class="lineno"> 57</span>   <span class="p">{</span>
<span class="lineno"> 58</span>     <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;No pattern was given</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="lineno"> 59</span>     <span class="n">usage</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>      <span class="cm">/* no pattern: exit() */</span>
<span class="lineno"> 60</span>   <span class="p">}</span>
<span class="lineno"> 61</span>   <span class="n">p</span><span class="o">-&gt;</span><span class="n">pattern</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>   <span class="cm">/* ok, pattern found */</span>
<span class="lineno"> 62</span> 
<span class="lineno"> 63</span>   <span class="k">if</span> <span class="p">(</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">iflag</span> <span class="p">)</span>  <span class="cm">/* case insensitive */</span>
<span class="lineno"> 64</span>   <span class="p">{</span>
<span class="lineno"> 65</span>     <span class="kt">int</span> <span class="n">k</span><span class="p">;</span>
<span class="lineno"> 66</span>     <span class="n">p</span><span class="o">-&gt;</span><span class="n">upattern</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">malloc</span><span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">pattern</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="lineno"> 67</span>     <span class="k">for</span> <span class="p">(</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">strlen</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">pattern</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">k</span><span class="p">)</span>
<span class="lineno"> 68</span>     <span class="p">{</span>
<span class="lineno"> 69</span>       <span class="n">p</span><span class="o">-&gt;</span><span class="n">upattern</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">pattern</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
<span class="lineno"> 70</span>     <span class="p">}</span>
<span class="lineno"> 71</span>   <span class="p">}</span>
<span class="lineno"> 72</span>   <span class="k">return</span> <span class="o">++</span><span class="n">i</span><span class="p">;</span>  <span class="cm">/* continue from next parameter */</span>
<span class="lineno"> 73</span> <span class="p">}</span>
<span class="lineno"> 74</span> 
<span class="lineno"> 75</span> <span class="kt">int</span> <span class="nf">is_delim</span><span class="p">(</span> <span class="kt">char</span> <span class="n">ch</span><span class="p">)</span>
<span class="lineno"> 76</span> <span class="p">{</span>
<span class="lineno"> 77</span>   <span class="k">return</span> <span class="o">!</span><span class="p">(</span> <span class="n">isalpha</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="o">||</span> <span class="n">isdigit</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="o">||</span> <span class="sc">&#39;_&#39;</span> <span class="o">==</span> <span class="n">ch</span> <span class="p">);</span>
<span class="lineno"> 78</span> <span class="p">}</span>
<span class="lineno"> 79</span> 
<span class="lineno"> 80</span> <span class="kt">int</span> <span class="nf">wmatch</span><span class="p">(</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pattern</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">where</span><span class="p">)</span>
<span class="lineno"> 81</span> <span class="p">{</span>
<span class="lineno"> 82</span>   <span class="kt">char</span> <span class="o">*</span><span class="n">before</span> <span class="o">=</span> <span class="n">where</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno"> 83</span>   <span class="kt">char</span> <span class="o">*</span><span class="n">after</span> <span class="o">=</span>  <span class="n">where</span> <span class="o">+</span> <span class="n">strlen</span><span class="p">(</span><span class="n">pattern</span><span class="p">);</span>
<span class="lineno"> 84</span> 
<span class="lineno"> 85</span>   <span class="k">return</span> <span class="p">(</span>  <span class="n">where</span> <span class="o">==</span> <span class="n">buffer</span>  <span class="o">&amp;&amp;</span>  <span class="n">is_delim</span><span class="p">(</span><span class="o">*</span><span class="n">after</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span>
<span class="lineno"> 86</span>          <span class="p">(</span>  <span class="n">is_delim</span><span class="p">(</span><span class="o">*</span><span class="n">before</span><span class="p">)</span>  <span class="o">&amp;&amp;</span>  <span class="sc">&#39;\n&#39;</span> <span class="o">==</span> <span class="o">*</span><span class="n">after</span> <span class="p">)</span> <span class="o">||</span>
<span class="lineno"> 87</span>          <span class="p">(</span>  <span class="n">is_delim</span><span class="p">(</span><span class="o">*</span><span class="n">before</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">is_delim</span><span class="p">(</span><span class="o">*</span><span class="n">after</span><span class="p">)</span> <span class="p">);</span>
<span class="lineno"> 88</span> <span class="p">}</span>
<span class="lineno"> 89</span>  
<span class="lineno"> 90</span> <span class="kt">void</span> <span class="nf">gr</span><span class="p">(</span> <span class="k">struct</span> <span class="n">param_s</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">in</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">out</span><span class="p">)</span>
<span class="lineno"> 91</span> <span class="p">{</span>
<span class="lineno"> 92</span>   <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">BUFSIZE</span><span class="p">];</span>
<span class="lineno"> 93</span>   <span class="k">while</span> <span class="p">(</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="n">fgets</span><span class="p">(</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">BUFSIZE</span><span class="p">,</span> <span class="n">in</span><span class="p">)</span> <span class="p">)</span>
<span class="lineno"> 94</span>   <span class="p">{</span>
<span class="lineno"> 95</span>     <span class="kt">int</span> <span class="n">is_match</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="cm">/* true if matches */</span>
<span class="lineno"> 96</span>     <span class="kt">char</span> <span class="o">*</span><span class="n">where</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="cm">/* pointer to beginning of matching */</span>
<span class="lineno"> 97</span> 
<span class="lineno"> 98</span>     <span class="k">if</span> <span class="p">(</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">iflag</span> <span class="p">)</span>
<span class="lineno"> 99</span>     <span class="p">{</span>
<span class="lineno">100</span>       <span class="kt">char</span> <span class="n">ubuffer</span><span class="p">[</span><span class="n">BUFSIZE</span><span class="p">];</span>
<span class="lineno">101</span>       <span class="kt">int</span> <span class="n">k</span><span class="p">;</span>
<span class="lineno">102</span>       <span class="k">for</span> <span class="p">(</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">k</span><span class="p">)</span>
<span class="lineno">103</span>       <span class="p">{</span>
<span class="lineno">104</span>         <span class="n">ubuffer</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
<span class="lineno">105</span>       <span class="p">}</span>
<span class="lineno">106</span>       <span class="n">is_match</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="p">(</span><span class="n">where</span> <span class="o">=</span> <span class="n">strstr</span><span class="p">(</span> <span class="n">ubuffer</span><span class="p">,</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">upattern</span><span class="p">))</span> <span class="p">);</span>
<span class="lineno">107</span>       <span class="k">if</span> <span class="p">(</span> <span class="n">is_match</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">wflag</span> <span class="p">)</span>
<span class="lineno">108</span>         <span class="n">is_match</span> <span class="o">=</span> <span class="n">wmatch</span><span class="p">(</span> <span class="n">ubuffer</span><span class="p">,</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">upattern</span><span class="p">,</span> <span class="n">where</span><span class="p">);</span>
<span class="lineno">109</span>     <span class="p">}</span>
<span class="lineno">110</span>     <span class="k">else</span>
<span class="lineno">111</span>     <span class="p">{</span>
<span class="lineno">112</span>       <span class="n">is_match</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="p">(</span><span class="n">where</span> <span class="o">=</span> <span class="n">strstr</span><span class="p">(</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">pattern</span><span class="p">))</span> <span class="p">);</span>
<span class="lineno">113</span>       <span class="k">if</span> <span class="p">(</span> <span class="n">is_match</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">wflag</span> <span class="p">)</span>
<span class="lineno">114</span>         <span class="n">is_match</span> <span class="o">=</span> <span class="n">wmatch</span><span class="p">(</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">pattern</span><span class="p">,</span> <span class="n">where</span><span class="p">);</span>
<span class="lineno">115</span>     <span class="p">}</span>
<span class="lineno">116</span>   
<span class="lineno">117</span>     <span class="k">if</span> <span class="p">(</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">vflag</span> <span class="p">)</span>
<span class="lineno">118</span>     <span class="p">{</span>
<span class="lineno">119</span>       <span class="n">is_match</span> <span class="o">=</span> <span class="o">!</span> <span class="n">is_match</span><span class="p">;</span>
<span class="lineno">120</span>     <span class="p">}</span>
<span class="lineno">121</span> 
<span class="lineno">122</span>     <span class="k">if</span> <span class="p">(</span> <span class="n">is_match</span> <span class="p">)</span>
<span class="lineno">123</span>     <span class="p">{</span>
<span class="lineno">124</span>       <span class="n">fputs</span><span class="p">(</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">out</span><span class="p">);</span>
<span class="lineno">125</span>     <span class="p">}</span>
<span class="lineno">126</span>   <span class="p">}</span>
<span class="lineno">127</span> <span class="p">}</span>
<span class="lineno">128</span> 
<span class="lineno">129</span> 
<span class="lineno">130</span> <span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="lineno">131</span> <span class="p">{</span>
<span class="lineno">132</span>   <span class="k">struct</span> <span class="n">param_s</span> <span class="n">params</span><span class="p">;</span>
<span class="lineno">133</span>   <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">do_params</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">params</span><span class="p">,</span> <span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
<span class="lineno">134</span> 
<span class="lineno">135</span> <span class="cp">#ifdef DEBUG</span>
<span class="lineno">136</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;iflag    = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">.</span><span class="n">iflag</span><span class="p">);</span>
<span class="lineno">137</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;vflag    = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">.</span><span class="n">vflag</span><span class="p">);</span>
<span class="lineno">138</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;wflag    = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">.</span><span class="n">wflag</span><span class="p">);</span>
<span class="lineno">139</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;pattern  = %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">.</span><span class="n">pattern</span><span class="p">);</span>
<span class="lineno">140</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;upattern = %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">.</span><span class="n">upattern</span><span class="p">);</span>
<span class="lineno">141</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;i == %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
<span class="lineno">142</span> <span class="cp">#endif </span><span class="cm">/* DEBUG */</span><span class="cp"></span>
<span class="lineno">143</span> 
<span class="lineno">144</span>   <span class="k">if</span> <span class="p">(</span> <span class="n">i</span> <span class="o">==</span> <span class="n">argc</span> <span class="p">)</span>
<span class="lineno">145</span>   <span class="p">{</span>
<span class="lineno">146</span>     <span class="n">gr</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">params</span><span class="p">,</span> <span class="n">stdin</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
<span class="lineno">147</span>   <span class="p">}</span>
<span class="lineno">148</span>   <span class="k">else</span>
<span class="lineno">149</span>   <span class="p">{</span>
<span class="lineno">150</span>     <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="lineno">151</span>     <span class="p">{</span>
<span class="lineno">152</span>       <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
<span class="lineno">153</span>       <span class="k">if</span> <span class="p">(</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="n">fp</span> <span class="p">)</span>
<span class="lineno">154</span>       <span class="p">{</span>
<span class="lineno">155</span>         <span class="n">gr</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">params</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
<span class="lineno">156</span>         <span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
<span class="lineno">157</span>       <span class="p">}</span>
<span class="lineno">158</span>       <span class="k">else</span>
<span class="lineno">159</span>       <span class="p">{</span>
<span class="lineno">160</span>         <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Can&#39;t open %s for read</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="lineno">161</span>       <span class="p">}</span>
<span class="lineno">162</span>     <span class="p">}</span>
<span class="lineno">163</span>   <span class="p">}</span>
<span class="lineno">164</span>   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">165</span> <span class="p">}</span></code></pre></div>

<h2 id="hexdump">hexdump</h2>

<p>Az input állomány(oka)t hexadecimális formátumban írja ki 16 bájtonként.
A 16 elemű sor kiírás előtt megelenik a sor címe (szintén hexadecimálisan),
utána pedig maguk a karakterek íródnak ki ASCII formátumban (a nem 
megjeleníthető karakterek helyett pedig egy pont karakter).</p>

<h3 id="a-program-implementcija-c-ben">A program implementációja C-ben</h3>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="lineno"> 1</span> <span class="cp">#include &lt;stdio.h&gt;</span>
<span class="lineno"> 2</span> <span class="cp">#include &lt;ctype.h&gt;</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span> <span class="cp">#define LINESIZE 16</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span> <span class="kt">void</span> <span class="nf">hd</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">in</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">out</span><span class="p">);</span>
<span class="lineno"> 7</span> <span class="kt">void</span> <span class="nf">print</span><span class="p">(</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">,</span> <span class="kt">long</span> <span class="n">addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="lineno">10</span> <span class="p">{</span>
<span class="lineno">11</span>   <span class="kt">int</span> <span class="n">err</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">12</span>   <span class="k">if</span> <span class="p">(</span> <span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span>
<span class="lineno">13</span>   <span class="p">{</span>
<span class="lineno">14</span>     <span class="n">hd</span><span class="p">(</span> <span class="n">stdin</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
<span class="lineno">15</span>   <span class="p">}</span>
<span class="lineno">16</span>   <span class="k">else</span>
<span class="lineno">17</span>   <span class="p">{</span>
<span class="lineno">18</span>     <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="lineno">19</span>     <span class="k">for</span> <span class="p">(</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span>
<span class="lineno">20</span>     <span class="p">{</span>
<span class="lineno">21</span>       <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
<span class="lineno">22</span>       <span class="k">if</span> <span class="p">(</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="n">fp</span> <span class="p">)</span>
<span class="lineno">23</span>       <span class="p">{</span>
<span class="lineno">24</span>         <span class="n">hd</span><span class="p">(</span> <span class="n">fp</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
<span class="lineno">25</span>       <span class="p">}</span>
<span class="lineno">26</span>       <span class="k">else</span>
<span class="lineno">27</span>       <span class="p">{</span>      
<span class="lineno">28</span>         <span class="n">fprintf</span><span class="p">(</span> <span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Can&#39;t open %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="lineno">29</span>         <span class="n">err</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno">30</span>       <span class="p">}</span>
<span class="lineno">31</span>     <span class="p">}</span>
<span class="lineno">32</span>   <span class="p">}</span>
<span class="lineno">33</span>   <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="lineno">34</span> <span class="p">}</span>
<span class="lineno">35</span> 
<span class="lineno">36</span> <span class="kt">void</span> <span class="nf">hd</span><span class="p">(</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">in</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">out</span><span class="p">)</span>
<span class="lineno">37</span> <span class="p">{</span>
<span class="lineno">38</span>   <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">39</span>   <span class="kt">long</span> <span class="n">addr</span> <span class="o">=</span> <span class="mi">0L</span><span class="p">;</span>
<span class="lineno">40</span>   <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
<span class="lineno">41</span>   <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">LINESIZE</span><span class="p">];</span>
<span class="lineno">42</span> 
<span class="lineno">43</span>   <span class="k">while</span> <span class="p">(</span> <span class="n">EOF</span> <span class="o">!=</span> <span class="p">(</span><span class="n">ch</span> <span class="o">=</span> <span class="n">fgetc</span><span class="p">(</span><span class="n">in</span><span class="p">))</span> <span class="p">)</span>
<span class="lineno">44</span>   <span class="p">{</span>
<span class="lineno">45</span>     <span class="n">buffer</span><span class="p">[</span><span class="n">cnt</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">ch</span><span class="p">;</span>
<span class="lineno">46</span>     <span class="k">if</span> <span class="p">(</span> <span class="n">LINESIZE</span> <span class="o">==</span> <span class="n">cnt</span> <span class="p">)</span>
<span class="lineno">47</span>     <span class="p">{</span>
<span class="lineno">48</span>       <span class="n">print</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">cnt</span><span class="p">);</span>
<span class="lineno">49</span>       <span class="n">addr</span> <span class="o">+=</span> <span class="n">LINESIZE</span><span class="p">;</span>
<span class="lineno">50</span>       <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">51</span>     <span class="p">}</span>
<span class="lineno">52</span>   <span class="p">}</span>
<span class="lineno">53</span>   <span class="n">print</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">cnt</span><span class="p">);</span>
<span class="lineno">54</span> <span class="p">}</span>
<span class="lineno">55</span> 
<span class="lineno">56</span> <span class="kt">void</span> <span class="nf">print</span><span class="p">(</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">out</span><span class="p">,</span> <span class="kt">long</span> <span class="n">addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
<span class="lineno">57</span> <span class="p">{</span>
<span class="lineno">58</span>   <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="lineno">59</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="s">&quot;%08lx  |  &quot;</span><span class="p">,</span> <span class="n">addr</span><span class="p">);</span>
<span class="lineno">60</span>   <span class="k">for</span> <span class="p">(</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span>
<span class="lineno">61</span>   <span class="p">{</span>
<span class="lineno">62</span>     <span class="n">fprintf</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="s">&quot; %02x&quot;</span><span class="p">,</span> <span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="lineno">63</span>   <span class="p">}</span>
<span class="lineno">64</span>   <span class="k">for</span> <span class="p">(</span> <span class="n">i</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">LINESIZE</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="lineno">65</span>   <span class="p">{</span>
<span class="lineno">66</span>     <span class="n">fprintf</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="s">&quot;   &quot;</span><span class="p">);</span>
<span class="lineno">67</span>   <span class="p">}</span>
<span class="lineno">68</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="s">&quot;  |  &quot;</span><span class="p">);</span>
<span class="lineno">69</span>   <span class="k">for</span> <span class="p">(</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="lineno">70</span>   <span class="p">{</span>  
<span class="lineno">71</span>     <span class="n">fprintf</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="s">&quot;%c&quot;</span><span class="p">,</span> <span class="n">isgraph</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">?</span> <span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:</span> <span class="sc">&#39;.&#39;</span><span class="p">);</span>
<span class="lineno">72</span>   <span class="p">}</span>
<span class="lineno">73</span>   <span class="n">fprintf</span><span class="p">(</span> <span class="n">out</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="lineno">74</span> <span class="p">}</span></code></pre></div>

<h3 id="a-program-implementcija-python3-ban">A program implementációja Python3-ban</h3>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="lineno"> 1</span> <span class="c">#!/usr/bin/env python3</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="kn">from</span> <span class="nn">curses</span> <span class="kn">import</span> <span class="n">ascii</span>
<span class="lineno"> 4</span> <span class="kn">import</span> <span class="nn">io</span>
<span class="lineno"> 5</span> <span class="kn">import</span> <span class="nn">sys</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> <span class="k">def</span> <span class="nf">hd</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span>     <span class="n">addr</span> <span class="o">=</span> <span class="mi">0</span>
<span class="lineno">10</span>     <span class="n">line_size</span> <span class="o">=</span> <span class="mi">16</span>
<span class="lineno">11</span> 
<span class="lineno">12</span>     <span class="nb">buffer</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">line_size</span><span class="p">)</span>
<span class="lineno">13</span>     <span class="k">while</span> <span class="nb">buffer</span> <span class="o">!=</span> <span class="n">b</span><span class="s">&quot;&quot;</span><span class="p">:</span>
<span class="lineno">14</span>         <span class="n">printer</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="nb">buffer</span><span class="p">,</span> <span class="n">line_size</span><span class="p">)</span>
<span class="lineno">15</span>         <span class="n">addr</span><span class="o">+=</span> <span class="n">line_size</span>
<span class="lineno">16</span>         <span class="nb">buffer</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">line_size</span><span class="p">)</span>
<span class="lineno">17</span> 
<span class="lineno">18</span> <span class="k">def</span> <span class="nf">printer</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="n">line_size</span><span class="p">):</span>
<span class="lineno">19</span> 
<span class="lineno">20</span>     <span class="n">line_in_hex</span> <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;{:02x}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">buf</span><span class="p">)</span> \
<span class="lineno">21</span>         <span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">line_size</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="n">line_size</span><span class="p">)</span>
<span class="lineno">22</span> 
<span class="lineno">23</span>     <span class="n">replace_non_ascii</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="nb">chr</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">if</span> <span class="n">ascii</span><span class="o">.</span><span class="n">isgraph</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">else</span> <span class="s">&quot;.&quot;</span>
<span class="lineno">24</span>     <span class="n">line_in_text</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">replace_non_ascii</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">buf</span><span class="p">)</span>
<span class="lineno">25</span> 
<span class="lineno">26</span>     <span class="n">formatted_line</span> <span class="o">=</span> <span class="s">&quot;{:08x}  |   {} |  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">addr</span><span class="p">,</span>
<span class="lineno">27</span>                                                    <span class="n">line_in_hex</span><span class="p">,</span>
<span class="lineno">28</span>                                                    <span class="n">line_in_text</span><span class="p">)</span>
<span class="lineno">29</span>     <span class="k">print</span><span class="p">(</span><span class="n">formatted_line</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="n">output</span><span class="p">)</span>
<span class="lineno">30</span> 
<span class="lineno">31</span> 
<span class="lineno">32</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="lineno">33</span>     <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
<span class="lineno">34</span>         <span class="n">hd</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="lineno">35</span>     <span class="k">else</span><span class="p">:</span>
<span class="lineno">36</span>         <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
<span class="lineno">37</span>             <span class="k">try</span><span class="p">:</span>
<span class="lineno">38</span>                 <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span><span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_content</span><span class="p">:</span>
<span class="lineno">39</span>                     <span class="n">hd</span><span class="p">(</span><span class="n">file_content</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="lineno">40</span>             <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">ioerr</span><span class="p">:</span>
<span class="lineno">41</span>                 <span class="k">print</span><span class="p">(</span><span class="s">&quot;Can&#39;t open &quot;</span> <span class="o">+</span> <span class="n">arg</span><span class="p">)</span>
<span class="lineno">42</span> 
<span class="lineno">43</span> <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
<span class="lineno">44</span>     <span class="n">main</span><span class="p">()</span></code></pre></div>


  </article>

</div>

  </article>

</div>

      </div>

       <div id='footer'>Copyright &copy; 2015-2017 Zoltán Porkoláb</div>




    </div>
  </body>

   <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-73707766-1', 'auto');
  ga('send', 'pageview');

</script>


</html>
